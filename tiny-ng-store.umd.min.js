var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),__decorate=this&&this.__decorate||function(t,e,r,n){var o,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i},__metadata=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};!function(t){if("object"==typeof module&&"object"==typeof module.exports){var e=t(require,exports);void 0!==e&&(module.exports=e)}else"function"==typeof define&&define.amd&&define(["require","exports","@angular/core","rxjs/Observable","rxjs/Subject","rxjs/BehaviorSubject","rxjs/add/operator/scan","rxjs/add/operator/map","rxjs/add/operator/take","rxjs/add/operator/distinctUntilChanged"],t)}(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t("@angular/core"),n=t("rxjs/Observable"),o=t("rxjs/Subject"),a=t("rxjs/BehaviorSubject");t("rxjs/add/operator/scan"),t("rxjs/add/operator/map"),t("rxjs/add/operator/take"),t("rxjs/add/operator/distinctUntilChanged");var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(n.Observable);e.TnsState=i;var c=function(){function t(){}return t}();e.StoreItem=c;var s=function(){function t(t){this.storeItem=t}return t}(),u=function(){function t(t){this.storeItem=t}return t}(),f=function(){function t(t){this.storeItem=t}return t}(),p=function(){function t(){this.dispatcher=new o.Subject,this.state=this.storeInit([],this.dispatcher)}return t.prototype.InsertItem=function(t){return this.dispatcher.next(new s(t)),this.GetItem(t.name)},t.prototype.DeleteItem=function(t){this.dispatcher.next(new u({name:t}))},t.prototype.UpdateItem=function(t){this.dispatcher.next(new f(t))},t.prototype.GetItem=function(t){return this.state.map(function(e){return e.filter(function(e){return e.name===t})[0]}).distinctUntilChanged()},t.prototype.storeInit=function(t,e){var r=new a.BehaviorSubject(t);return this.store(t,e).subscribe(function(t){return r.next(t)}),r},t.prototype.store=function(t,e){var r=this;return e.scan(function(t,e){switch(e.constructor){case s:var n=t.filter(function(t){return e.storeItem.name!==t.name});return n.concat([e.storeItem]);case u:return t.filter(function(t){return t.name!==e.storeItem.name});case f:return t.map(function(t){return t.name!==e.storeItem.name?t:r.updateItem(e.storeItem)});default:return t}},t)},t.prototype.updateItem=function(t){var e={};return Object.keys(t).map(function(r){return e[r]=t[r]}),e},t}();p=__decorate([r.Injectable(),__metadata("design:paramtypes",[])],p),e.TinyNgStore=p});